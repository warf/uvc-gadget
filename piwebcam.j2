#!/bin/bash

# Run multi-gadget setup script.
sudo {{ uvc_gadget_directory }}/multi-gadget.sh

# Set some camera control options.
if [ -r settings/custom.sh ]; then
	# reset all values
	# /bin/bash settings/default.sh
	# custom v42l settings
	/bin/bash settings/custom.sh
else
	/usr/bin/v4l2-ctl -c auto_exposure=0
	/usr/bin/v4l2-ctl -c auto_exposure_bias=8
	/usr/bin/v4l2-ctl -c contrast=20
	/usr/bin/v4l2-ctl -c video_bitrate=25000000
fi

# For 720p:
sudo {{ uvc_gadget_directory }}/uvc-gadget -f1 -s1 -r0 -u /dev/video1 -v /dev/video0
# For 1080p:
# sudo {{ uvc_gadget_directory }}/uvc-gadget -f1 -s1 -r1 -u /dev/video1 -v /dev/video0
